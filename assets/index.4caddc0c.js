import I,{createContext as M,useReducer as N,useContext as v,useState as E}from"../node_modules/react/index.js";import T from"../node_modules/react-dom/client.js";import L from"../node_modules/i18next/dist/esm/i18next.js";import P from"../node_modules/i18next-http-backend/esm/index.js";import{initReactI18next as R,useTranslation as B}from"../node_modules/react-i18next/dist/es/index.js";import x from"../node_modules/@mui/material/StyledEngineProvider/index.js";import{Box as p,Typography as D,TextField as G,InputAdornment as b,IconButton as $}from"../node_modules/@mui/material/index.js";import w from"../node_modules/@mui/material/Box/index.js";import W from"../node_modules/@mui/material/CircularProgress/index.js";import*as h from"../node_modules/react/jsx-runtime.js";import{GoogleGenerativeAI as k,HarmCategory as l,HarmBlockThreshold as u}from"../node_modules/@google/generative-ai/dist/index.mjs";import{Send as F,Menu as H}from"../node_modules/@mui/icons-material/esm/index.js";const K=function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function a(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerpolicy&&(n.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?n.credentials="include":e.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(e){if(e.ep)return;e.ep=!0;const n=a(e);fetch(e.href,n)}};K();L.use(P).use(R).init({fallbackLng:"en",debug:!1,backend:{loadPath:"/GenX/locales/{{lng}}/translation.json"}});const U="_spinnerContainer_vroo6_1",j="_spinner_vroo6_1";var f={spinnerContainer:U,spinner:j};const o=h.jsx,_=h.jsxs,A=h.Fragment;function V({isLoading:t,size:i}){return o(A,{children:t&&o(w,{className:f.spinnerContainer,children:o(W,{className:f.spinner,size:i})})})}const Y="_messageContainer_1u1h7_1",X="_userMessage_1u1h7_13",q="_assistantMessage_1u1h7_19";var d={messageContainer:Y,userMessage:X,assistantMessage:q};function z({role:t,content:i}){function a(e){const n=/^(Assistant:|Ai:)\s*/i;for(;n.test(e);)e=e.replace(n,"");return e}function s(e){return e.split(/(\*\*[^*]+\*\*|\*[^*]+\*|<u>[^<]+<\/u>|~~[^~]+~~)/).map((r,c)=>r.startsWith("**")&&r.endsWith("**")?o("span",{style:{fontWeight:"bold"},children:r.slice(2,-2)},c):r.startsWith("*")&&r.endsWith("*")?o("span",{style:{fontStyle:"italic"},children:r.slice(1,-1)},c):r.startsWith("<u>")&&r.endsWith("</u>")?o("span",{style:{textDecoration:"underline"},children:r.slice(3,-4)},c):r.startsWith("~~")&&r.endsWith("~~")?o("span",{style:{textDecoration:"line-through"},children:r.slice(2,-2)},c):r)}return o(p,{className:d.messageContainer,children:o(D,{style:{whiteSpace:"pre-line"},className:t==="user"?d.userMessage:d.assistantMessage,children:s(a(i))})})}const g={}.VITE_GOOGLE_GEMINI_API_KEY,Q="gemini-1.0-pro";async function J(t){if(!g)throw new Error("No API Key present.");const a=new k(g).getGenerativeModel({model:Q}),s={temperature:.9,topK:1,topP:1,maxOutputTokens:2048},e=[{category:l.HARM_CATEGORY_HARASSMENT,threshold:u.BLOCK_MEDIUM_AND_ABOVE},{category:l.HARM_CATEGORY_HATE_SPEECH,threshold:u.BLOCK_MEDIUM_AND_ABOVE},{category:l.HARM_CATEGORY_SEXUALLY_EXPLICIT,threshold:u.BLOCK_MEDIUM_AND_ABOVE},{category:l.HARM_CATEGORY_DANGEROUS_CONTENT,threshold:u.BLOCK_MEDIUM_AND_ABOVE}];return(await a.startChat({generationConfig:s,safetySettings:e,history:[]}).sendMessage(t)).response.text()}function Z(t,i){switch(i.type){case"STORE_INPUT":return{...t,messages:[...t.messages,{role:"user",content:i.data.input,date:new Date}],isLoading:!0};case"STORE_RESPONSE":return{...t,messages:[...t.messages,{role:"assistant",content:i.data.response,date:new Date}],isLoading:!1};case"SET_IS_LOADING":return{...t,isLoading:!0};case"SET_IS_NOT_LOADING":return{...t,isLoading:!1};default:return{...t}}}const ee={isLoading:!1,messages:[]},C=M(null);function te({children:t}){const[i,a]=N(Z,ee);async function s(n){try{a({type:"STORE_INPUT",data:{input:n}});const r=i.messages?`Continue the conversation: ${i.messages.map(c=>`${c.role}: ${c.content}`).join(`
`)}

Human: ${n}`:n;return await J(r).then(c=>(a({type:"STORE_RESPONSE",data:{response:c}}),c)).catch(c=>{console.error(c)})}finally{a({type:"SET_IS_NOT_LOADING"})}}const e={state:i,sendPrompt:s};return o(C.Provider,{value:e,children:t})}function O(){const t=v(C);if(!t)throw new Error("useGMP must be called from inside of Provider");return t}const ne="_chatBox_du5it_2";var se={chatBox:ne};function re(){const{state:t}=O(),i=t.messages;function a(s){return s.sort((e,n)=>e.date.getTime()-n.date.getTime()),s}return _(p,{className:se.chatBox,children:[a(i).map((s,e)=>o(z,{role:s.role,content:s.content},e)),o(V,{isLoading:t.isLoading,size:20})]})}const oe="_inputField_170r0_1",ie="_searchIcon_170r0_31";var ae={inputField:oe,searchIcon:ie};function ce(){const{sendPrompt:t}=O(),{t:i}=B("translation"),[a,s]=E("");function e(){t(a),s("")}return o(A,{children:o(G,{value:a,onChange:n=>{s(n.target.value)},onKeyDown:n=>{n.key==="Enter"&&e()},placeholder:i("main.input.placeholder"),variant:"standard",fullWidth:!0,className:ae.inputField,InputProps:{disableUnderline:!0,endAdornment:a&&o(b,{position:"end",children:o($,{onClick:e,sx:{color:"#444746"},children:o(F,{})})})}})})}const le="_main_1g49z_1";var ue={main:le};function de(){return _(p,{className:ue.main,children:[o(re,{}),o(ce,{})]})}const me="_sidebar_1t293_2",pe="_collapsed_1t293_17",he="_collapseButton_1t293_22";var m={sidebar:me,collapsed:pe,collapseButton:he};function _e(){const[t,i]=E(!0),a=()=>{i(!t)};return o("div",{className:`${m.sidebar} ${t?m.collapsed:""}`,children:o("button",{className:m.collapseButton,onClick:a,children:o(H,{})})})}const fe="_app_wu3c0_1";var ge={app:fe};function ye(){return o(x,{injectFirst:!0,children:o(te,{children:_("div",{className:ge.app,children:[o(_e,{}),o(de,{})]})})})}const Ee="modulepreload",y={},Ae="/GenX/",Ce=function(i,a){return!a||a.length===0?i():Promise.all(a.map(s=>{if(s=`${Ae}${s}`,s in y)return;y[s]=!0;const e=s.endsWith(".css"),n=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${n}`))return;const r=document.createElement("link");if(r.rel=e?"stylesheet":Ee,e||(r.as="script",r.crossOrigin=""),r.href=s,document.head.appendChild(r),e)return new Promise((c,S)=>{r.addEventListener("load",c),r.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>i())};function Oe(t){t&&t instanceof Function&&Ce(()=>import("../node_modules/web-vitals/dist/web-vitals.js"),[]).then(({getCLS:i,getFID:a,getFCP:s,getLCP:e,getTTFB:n})=>{i(t),a(t),s(t),e(t),n(t)})}const Se=T.createRoot(document.getElementById("root"));Se.render(o(I.StrictMode,{children:o(ye,{})}));Oe();
